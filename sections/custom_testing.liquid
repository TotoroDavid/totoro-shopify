{{ 'section-blog-avanzado.css' | asset_url | stylesheet_tag }}

<section class="custom-blog-section">
  <div class="page-width">
    <div class="custom-blog__header">
      {%- if section.settings.tagline != blank -%}<p class="custom-blog__tagline">{{ section.settings.tagline }}</p>{%- endif -%}
      {%- if section.settings.heading != blank -%}<h2 class="custom-blog__heading">{{ section.settings.heading }}</h2>{%- endif -%}
      {%- if section.settings.description != blank -%}<div class="rte">{{ section.settings.description }}</div>{%- endif -%}
    </div>

    <div class="custom-blog__grid">
      {%- for block in section.blocks -%}
        <div class="article-card" {{ block.shopify_attributes }}>
          {%- if block.settings.image != blank -%}
            <a href="{{ block.settings.link | default: '#' }}" class="article-card__image-link">
              <img src="{{ block.settings.image | image_url: width: 550 }}" alt="{{ block.settings.image.alt | escape }}" class="article-card__image">
            </a>
          {%- else -%}
            <div class="article-card__image-link">
              {{ 'image' | placeholder_svg_tag: 'article-card__image' }}
            </div>
          {%- endif -%}

          {%- if block.settings.category != blank -%}<p class="article-card__category">{{ block.settings.category }}</p>{%- endif -%}
          
          <a href="{{ block.settings.link | default: '#' }}" class="article-card__title-link">
            <h5 class="article-card__title">{{ block.settings.title }}</h5>
          </a>
          
          <div class="article-card__excerpt rte">{{ block.settings.excerpt }}</div>

          <div class="article-card__author-info">
            {%- if block.settings.author_avatar != blank -%}
              <img src="{{ block.settings.author_avatar | image_url: width: 96 }}" alt="{{ block.settings.author_avatar.alt | escape }}" class="article-card__author-avatar">
            {%- else -%}
               {{ 'image' | placeholder_svg_tag: 'article-card__author-avatar' }}
            {%- endif -%}
            <div>
              {%- if block.settings.author_name != blank -%}<h6 class="article-card__author-name">{{ block.settings.author_name }}</h6>{%- endif -%}
              <div class="article-card__meta">
                {%- if block.settings.date != blank -%}<p>{{ block.settings.date }}</p>{%- endif -%}
                {%- if block.settings.read_time != blank -%}<span class="article-card__meta-divider">•</span><p>{{ block.settings.read_time }}</p>{%- endif -%}
              </div>
            </div>
          </div>
        </div>
      {%- endfor -%}
    </div>

    {%- if section.settings.button_label != blank -%}
      <div class="custom-blog__button-wrapper">
        <a href="{{ section.settings.button_link | default: '#' }}" class="custom-blog__button">{{ section.settings.button_label }}</a>
      </div>
    {%- endif -%}
  </div>
</section>

{% schema %}
{
  "name": "Blog Personalizado",
  "tag": "section",
  "class": "custom-blog-section",
  "max_blocks": 3,
  "settings": [
    {
      "type": "text",
      "id": "tagline",
      "label": "t:sections.custom_blog.settings.tagline.label",
      "default": "Blog"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Título principal",
      "default": "Título de la Sección"
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Descripción",
      "default": "<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>"
    },
    {
      "type": "header",
      "content": "Botón 'Ver todo'"
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Texto del botón",
      "default": "Ver todo"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Enlace del botón"
    }
  ],
  "blocks": [
    {
      "type": "article_card",
      "name": "Tarjeta de Artículo",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Imagen Principal"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Enlace de la tarjeta (opcional)"
        },
        {
          "type": "text",
          "id": "category",
          "label": "Categoría",
          "default": "Categoría"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Título",
          "default": "Título del Artículo"
        },
        {
          "type": "richtext",
          "id": "excerpt",
          "label": "Resumen",
          "default": "<p>Escribe un breve resumen aquí.</p>"
        },
        {
          "type": "header",
          "content": "Información del Autor"
        },
        {
          "type": "image_picker",
          "id": "author_avatar",
          "label": "Avatar del Autor"
        },
        {
          "type": "text",
          "id": "author_name",
          "label": "Nombre del Autor",
          "default": "Nombre Completo"
        },
        {
          "type": "text",
          "id": "date",
          "label": "Fecha",
          "default": "18 Jun, 2025"
        },
        {
          "type": "text",
          "id": "read_time",
          "label": "Tiempo de Lectura",
          "default": "5 min read"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Blog Personalizado"
    }
  ]
}
{% endschema %}