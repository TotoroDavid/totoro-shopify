{{ 'component-card.css' | asset_url | stylesheet_tag }}
{{ 'component-article-card.css' | asset_url | stylesheet_tag }}

<div class="blog-section page-width">
  <div class="title-wrapper-with-link">
    <h2 class="title">{{ section.settings.heading | escape }}</h2>
  </div>

  <ul class="blog__posts articles-wrapper grid grid--1-col grid--3-col-desktop">
    {%- if section.settings.blog != blank -%}
      {%- for article in section.settings.blog.articles limit: section.settings.posts_to_show -%}
        <li class="grid__item">
          <div class="card-wrapper">
            <div class="card card--standard card--media">
              <div class="card__inner">
                {%- if article.image -%}
                  <div class="card__media">
                    <div class="media media--transparent">
                      <img
                        src="{{ article.image | image_url: width: 750 }}"
                        alt="{{ article.image.alt | escape }}"
                        loading="lazy"
                        width="750"
                        height="{{ 750 | divided_by: article.image.aspect_ratio | ceil }}"
                      >
                    </div>
                  </div>
                {%- endif -%}
                <div class="card__content">
                  <h3 class="card__heading h3">
                    <a href="{{ article.url }}" class="full-unstyled-link">
                      {{ article.title | escape }}
                    </a>
                  </h3>
                  <div class="article-card__info">
  {{ article.published_at | time_tag: '%B %d, %Y' }}
</div>
                  {%- if article.excerpt.size > 0 or article.content.size > 0 -%}
                    <p class="article-card__excerpt rte-width">
                      {{ article.excerpt_or_content | strip_html | truncate: 150 }}
                    </p>
                  {%- endif -%}
                </div>
              </div>
            </div>
          </div>
        </li>
      {%- endfor -%}
    {%- else -%}
      {%- for i in (1..3) -%}
        <li class="grid__item">
          <div class="card-wrapper">
            <div class="card card--standard card--media">
              <div class="card__inner">
                <div class="card__media">
                  <div class="media">
                    {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}
                  </div>
                </div>
                <div class="card__content">
                  <h3 class="card__heading h3">
                    Blog post title
                  </h3>
                   <p class="article-card__excerpt rte-width">
                     Use this section to welcome customers to your store, say a bit about your brand, and share a link.
                   </p>
                </div>
              </div>
            </div>
          </div>
        </li>
      {%- endfor -%}
    {%- endif -%}
  </ul>
</div>

{% schema %}
{
  "name": "Blog Posts Recientes",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Título de la sección",
      "default": "Últimas Noticias"
    },
    {
      "type": "blog",
      "id": "blog",
      "label": "Selecciona el blog"
    },
    {
      "type": "range",
      "id": "posts_to_show",
      "min": 1,
      "max": 3,
      "step": 1,
      "label": "Número de artículos a mostrar",
      "default": 3
    }
  ],
  "presets": [
    {
      "name": "Blog Posts Recientes"
    }
  ]
}
{% endschema %}